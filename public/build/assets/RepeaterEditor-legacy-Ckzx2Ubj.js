System.register(["./vendor-legacy-B38wspAF.js"],function(e,t){"use strict";var a,r,s,n,l,i,o,d,c,m,x,g,u,h,b;return{setters:[e=>{a=e.j,r=e.d,s=e.R,n=e.g,l=e.h,i=e.D,o=e.i,d=e.k,c=e.v,m=e.m,x=e.K,g=e.P,u=e.l,h=e.n,b=e.C}],execute:function(){function t({schema:e,data:t,onChange:r}){const s=(e,a)=>{r({...t,[e]:a})};return e&&0!==e.length?a.jsx("div",{className:"space-y-1",children:e.map(e=>((e,t,r,s="")=>{const n=e.name,l=void 0!==t?.[n]?t[n]:"repeater"===e.type?[]:"",i=s+n;switch(e.type){case"text":return a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e.label}),a.jsx("input",{type:"text",value:l,onChange:e=>r(n,e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:border-act-primary focus:ring focus:ring-act-primary/20 bg-gray-50 text-gray-800"})]},i);case"textarea":return a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e.label}),a.jsx("textarea",{value:l,onChange:e=>r(n,e.target.value),rows:3,className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:border-act-primary focus:ring focus:ring-act-primary/20 bg-gray-50 resize-y text-gray-800"})]},i);case"image":return a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e.label}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded border border-gray-200 overflow-hidden flex-shrink-0 relative group",children:l?a.jsx("img",{src:l,alt:"Preview",className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:a.jsx("i",{className:"fa-regular fa-image"})})}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("input",{type:"text",value:l,onChange:e=>r(n,e.target.value),placeholder:"Image URL...",className:"w-full text-xs border-gray-300 rounded shadow-sm focus:border-act-primary focus:ring focus:ring-act-primary/20 bg-gray-50"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(!t)return;const a=new FormData;a.append("file",t);const s=e.target.nextElementSibling;s&&(s.innerText="Uploading..."),fetch("/admin/upload-media",{method:"POST",body:a,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}}).then(e=>e.json()).then(e=>{e.url&&r(n,e.url)}).catch(e=>console.error("Upload failed",e)).finally(()=>{s&&(s.innerText="Choose File"),e.target.value=null})},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"}),a.jsxs("button",{className:"w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-600 text-xs py-1.5 px-3 rounded shadow-sm flex items-center justify-center gap-2 transition",children:[a.jsx("i",{className:"fa-solid fa-cloud-arrow-up"}),a.jsx("span",{children:"Choose File"})]})]})]})]})]},i);case"select":return a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:e.label}),a.jsx("select",{value:l,onChange:e=>r(n,e.target.value),className:"w-full text-sm border-gray-300 rounded-md shadow-sm focus:border-act-primary focus:ring focus:ring-act-primary/20 bg-gray-50 text-gray-800",children:e.options?.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))})]},i);case"repeater":return a.jsx(p,{label:e.label,items:l,schema:e.schema,onChange:e=>r(n,e)},i);default:return null}})(e,t,s))}):a.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-100 rounded-lg text-center",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 text-gray-400",children:a.jsx("i",{className:"fa-regular fa-lock"})}),a.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1",children:"Read Only Section"}),a.jsx("p",{className:"text-xs text-gray-500 leading-relaxed",children:"This section uses legacy content and is not editable."})]})}e("S",t);const f=Object.freeze(Object.defineProperty({__proto__:null,default:t},Symbol.toStringTag,{value:"Module"}));function y({id:e,index:r,data:s,schema:n,onRemove:l,onChange:i,expandedId:o,onToggleExpand:d}){const{attributes:c,listeners:m,setNodeRef:x,transform:g,transition:u,isDragging:f}=h({id:e}),y={transform:b.Transform.toString(g),transition:u,opacity:f?.5:1,position:"relative",zIndex:f?999:"auto"},p=o===e;return a.jsxs("div",{ref:x,style:y,className:"bg-white border border-gray-200 rounded-lg mb-2 shadow-sm group",children:[a.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 border-b border-gray-100 rounded-t-lg select-none",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[a.jsx("div",{...c,...m,className:"cursor-grab active:cursor-grabbing text-gray-400 p-1 hover:text-gray-600",children:a.jsx("i",{className:"fa-solid fa-grip-lines"})}),a.jsxs("button",{type:"button",onClick:()=>d(e),className:"text-xs font-semibold text-gray-700 truncate flex-1 text-left",children:[p?a.jsx("i",{className:"fa-solid fa-chevron-down mr-2 text-[10px] text-gray-400"}):a.jsx("i",{className:"fa-solid fa-chevron-right mr-2 text-[10px] text-gray-400"}),"object"!=typeof s?s:s.title||s.name||s.text||s.label||`Item #${r+1}`]})]}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("button",{type:"button",onClick:()=>l(r),className:"w-6 h-6 rounded flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition",title:"Remove Item",children:a.jsx("i",{className:"fa-regular fa-trash text-xs"})})})]}),p&&a.jsx("div",{className:"p-3 bg-white rounded-b-lg",children:n?a.jsx(t,{schema:n,data:s,onChange:e=>i(r,e)}):a.jsx("input",{type:"text",value:s,onChange:e=>i(r,e.target.value),className:"w-full text-sm border-gray-300 rounded"})})]})}function p({label:e,items:t=[],schema:h,onChange:b}){const[f,p]=r.useState(()=>(t||[]).map(e=>({id:`item-${Math.random().toString(36).substr(2,9)}`,data:e})));s.useEffect(()=>{p(e=>e.length===t.length?e.map((e,a)=>({...e,data:t[a]})):(t||[]).map(e=>({id:`item-${Math.random().toString(36).substr(2,9)}`,data:e})))},[t]);const[j,v]=r.useState(null),N=n(l(g),l(x,{coordinateGetter:m})),w=e=>{if(!confirm("Remove this item?"))return;const a=[...t];a.splice(e,1),b(a)},C=(e,a)=>{const r=[...t];r[e]=a,b(r)};return a.jsxs("div",{className:"mb-6 border border-gray-200 rounded-lg overflow-hidden flex flex-col bg-gray-50/50",children:[a.jsxs("div",{className:"bg-gray-100 px-3 py-2 border-b border-gray-200 flex justify-between items-center group",children:[a.jsx("label",{className:"text-xs font-bold uppercase text-gray-600 tracking-wider",children:e}),a.jsxs("button",{type:"button",onClick:()=>{const e={};h&&h.forEach(t=>{e[t.name]="repeater"===t.type?[]:""});const a=[...t,e];b(a)},className:"text-xs bg-white hover:bg-act-primary hover:text-white border border-gray-300 hover:border-act-primary text-gray-700 px-2 py-1 rounded shadow-sm transition flex items-center",children:[a.jsx("i",{className:"fa-solid fa-plus mr-1"})," Add"]})]}),a.jsx("div",{className:"p-2",children:a.jsx(i,{sensors:N,collisionDetection:o,onDragEnd:e=>{const{active:t,over:a}=e;a&&t.id!==a.id&&p(e=>{const r=e.findIndex(e=>e.id===t.id),s=e.findIndex(e=>e.id===a.id),n=u(e,r,s),l=n.map(e=>e.data);return b(l),n})},children:a.jsx(d,{items:f.map(e=>e.id),strategy:c,children:0===f.length?a.jsx("div",{className:"text-center py-6 text-gray-400 text-xs italic",children:"No items yet."}):f.map((e,t)=>a.jsx(y,{id:e.id,index:t,data:e.data,schema:h,onRemove:w,onChange:C,expandedId:j,onToggleExpand:e=>v(e===j?null:e)},e.id))})})})]})}e("a",f);const j=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}));e("R",j)}}});
