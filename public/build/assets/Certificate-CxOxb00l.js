import{d as e,j as s,H as a,e as t,s as l}from"./vendor-KZSLvCor.js";import i from"./Layout-W2AM6w_I.js";import{E as d}from"./EmptyState-CHkVwl5f.js";import{T as n}from"./Toast-hpu2Jnrp.js";import"./MainLayout-zJS1Kl8g.js";import"./whatsapp-Df9uErmj.js";import"./SimpleBreadcrumb-9WZ9B38O.js";function r({auth:r,certificates:c}){const[o,m]=e.useState(null),[x,f]=e.useState(null);return s.jsxs(i,{pageTitle:"My Certificates",children:[s.jsx(a,{title:"My Certificates"}),s.jsx(n,{show:!!o,message:null==o?void 0:o.message,type:null==o?void 0:o.type,onClose:()=>m(null)}),s.jsx("div",{className:"d-flex flex-column gap-3",children:c.length>0?c.map(e=>s.jsxs("div",{className:"card border shadow-sm rounded-20 overflow-hidden hover-lift transition-all position-relative",children:[s.jsx("div",{className:"position-absolute top-0 end-0 m-3 z-1",children:"Claimed"===e.status?s.jsxs("div",{className:"d-flex align-items-center text-success fw-bold small bg-white px-3 py-1 rounded-pill shadow-sm border border-success-subtle",children:[s.jsx("i",{className:"fa-solid fa-circle-check me-2"}),"VERIFIED & CLAIMED"]}):s.jsxs("div",{className:"d-flex align-items-center text-warning fw-bold small bg-white px-3 py-1 rounded-pill shadow-sm border border-warning-subtle",children:[s.jsx("i",{className:"fa-solid fa-circle-exclamation me-2"}),"ACTION REQUIRED"]})}),s.jsx("div",{className:"card-body p-0",children:s.jsxs("div",{className:"d-lg-flex align-items-center p-3",children:[s.jsx("div",{className:"pe-lg-3 mb-3 mb-lg-0",children:s.jsx("div",{className:"rounded-4 overflow-hidden position-relative bg-light",style:{width:"120px"},children:s.jsx("img",{src:e.event_thumbnail,alt:e.event_title,className:"w-100 h-100 object-fit-cover",style:{aspectRatio:"4/3"},onError:e=>{e.target.style.display="none",e.target.parentElement.classList.add("d-flex","align-items-center","justify-content-center"),e.target.parentElement.innerHTML='<i class="fa-solid fa-award text-muted fs-3"></i>'}})})}),s.jsx("div",{className:"grow pe-lg-4 mb-3 mb-lg-0",children:s.jsxs("div",{className:"d-flex flex-column justify-content-center h-100",children:[s.jsxs("div",{className:"mb-1 text-muted small",children:[s.jsx("i",{className:"fa-regular fa-calendar me-2"}),e.event_date]}),s.jsx("h6",{className:"fw-bold text-dark mb-1 text-truncate-2",style:{lineHeight:"1.4",maxWidth:"90%"},children:e.event_title}),s.jsx("p",{className:"text-muted small mb-0 mt-1",children:"Claimed"===e.status?"Issued: ".concat(e.issue_date):"Certificate ready to claim"})]})}),s.jsx("div",{className:"ps-lg-3 border-start-lg",style:{minWidth:"220px"},children:s.jsxs("div",{className:"d-flex flex-column gap-2 justify-content-end h-100 align-items-lg-end text-lg-end pt-5 pb-2",children:[s.jsx("div",{className:"w-100",children:"Claimed"===e.status?s.jsxs("a",{href:e.file_path,target:"_blank",download:!0,className:"th-btn w-100 rounded-pill fw-bold border-2 d-flex align-items-center justify-content-center",style:{padding:"8px 20px"},children:[s.jsx("i",{className:"fa-solid fa-download me-2"}),"Download PDF"]}):s.jsx("button",{onClick:()=>{return s=e.event_id,f(s),void t.post(l("events.certificates.claim",s),{},{preserveScroll:!0,onFinish:()=>f(null),onSuccess:()=>{m({message:"Certificate Claimed successfully!",type:"success"})},onError:e=>{const s=Object.values(e)[0]||"Failed to claim certificate.";m({message:s,type:"danger"})}});var s},disabled:x===e.event_id,className:"th-btn w-100 rounded-pill shadow-sm d-flex align-items-center justify-content-center",style:{padding:"10px 20px"},children:x===e.event_id?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"fa-solid fa-award ms-2"}),"Claim Certificate"]})})}),"Claimed"!==e.status&&s.jsx("div",{className:"text-lg-end w-100",children:s.jsx("span",{className:"text-muted small fst-italic",style:{fontSize:"11px"},children:"Available for download after claiming"})})]})})]})})]},e.id)):s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"card border-0 shadow-sm rounded-20 p-5 text-center",children:s.jsx(d,{message:"You haven't earned any certificates yet.",icon:"fa-award",link:"/events",linkText:"Browse Events"})})})})]})}export{r as default};
