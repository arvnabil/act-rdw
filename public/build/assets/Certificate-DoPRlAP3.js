import{r,j as e,H as m,b as x}from"./app-8jlO-GOR.js";import p from"./Layout-CgKqYdgO.js";import{E as f}from"./EmptyState-Dqfk01kJ.js";import{T as h}from"./Toast-BZmhIwvk.js";import{s as u}from"./index-BsxvijQw.js";/* empty css            */import"./MainLayout-B_NMIF89.js";import"./effect-fade-Cql-zif5.js";import"./SimpleBreadcrumb-Cmo_VdNj.js";function I({auth:g,certificates:i}){const[t,l]=r.useState(null),[d,n]=r.useState(null),o=s=>{n(s),x.post(u("events.certificates.claim",s),{},{preserveScroll:!0,onFinish:()=>n(null),onSuccess:()=>{l({message:"Certificate Claimed successfully!",type:"success"})},onError:a=>{const c=Object.values(a)[0]||"Failed to claim certificate.";l({message:c,type:"danger"})}})};return e.jsxs(p,{pageTitle:"My Certificates",children:[e.jsx(m,{title:"My Certificates"}),e.jsx(h,{show:!!t,message:t?.message,type:t?.type,onClose:()=>l(null)}),e.jsx("div",{className:"d-flex flex-column gap-3",children:i.length>0?i.map(s=>e.jsxs("div",{className:"card border shadow-sm rounded-20 overflow-hidden hover-lift transition-all position-relative",children:[e.jsx("div",{className:"position-absolute top-0 end-0 m-3 z-1",children:s.status==="Claimed"?e.jsxs("div",{className:"d-flex align-items-center text-success fw-bold small bg-white px-3 py-1 rounded-pill shadow-sm border border-success-subtle",children:[e.jsx("i",{className:"fa-solid fa-circle-check me-2"}),"VERIFIED & CLAIMED"]}):e.jsxs("div",{className:"d-flex align-items-center text-warning fw-bold small bg-white px-3 py-1 rounded-pill shadow-sm border border-warning-subtle",children:[e.jsx("i",{className:"fa-solid fa-circle-exclamation me-2"}),"ACTION REQUIRED"]})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("div",{className:"d-lg-flex align-items-center p-3",children:[e.jsx("div",{className:"pe-lg-3 mb-3 mb-lg-0",children:e.jsx("div",{className:"rounded-4 overflow-hidden position-relative bg-light",style:{width:"120px"},children:e.jsx("img",{src:s.event_thumbnail,alt:s.event_title,className:"w-100 h-100 object-fit-cover",style:{aspectRatio:"4/3"},onError:a=>{a.target.style.display="none",a.target.parentElement.classList.add("d-flex","align-items-center","justify-content-center"),a.target.parentElement.innerHTML='<i class="fa-solid fa-award text-muted fs-3"></i>'}})})}),e.jsx("div",{className:"grow pe-lg-4 mb-3 mb-lg-0",children:e.jsxs("div",{className:"d-flex flex-column justify-content-center h-100",children:[e.jsxs("div",{className:"mb-1 text-muted small",children:[e.jsx("i",{className:"fa-regular fa-calendar me-2"}),s.event_date]}),e.jsx("h6",{className:"fw-bold text-dark mb-1 text-truncate-2",style:{lineHeight:"1.4",maxWidth:"90%"},children:s.event_title}),e.jsx("p",{className:"text-muted small mb-0 mt-1",children:s.status==="Claimed"?`Issued: ${s.issue_date}`:"Certificate ready to claim"})]})}),e.jsx("div",{className:"ps-lg-3 border-start-lg",style:{minWidth:"220px"},children:e.jsxs("div",{className:"d-flex flex-column gap-2 justify-content-end h-100 align-items-lg-end text-lg-end pt-5 pb-2",children:[e.jsx("div",{className:"w-100",children:s.status==="Claimed"?e.jsxs("a",{href:s.file_path,target:"_blank",download:!0,className:"th-btn w-100 rounded-pill fw-bold border-2 d-flex align-items-center justify-content-center",style:{padding:"8px 20px"},children:[e.jsx("i",{className:"fa-solid fa-download me-2"}),"Download PDF"]}):e.jsx("button",{onClick:()=>o(s.event_id),disabled:d===s.event_id,className:"th-btn w-100 rounded-pill shadow-sm d-flex align-items-center justify-content-center",style:{padding:"10px 20px"},children:d===s.event_id?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa-solid fa-award ms-2"}),"Claim Certificate"]})})}),s.status!=="Claimed"&&e.jsx("div",{className:"text-lg-end w-100",children:e.jsx("span",{className:"text-muted small fst-italic",style:{fontSize:"11px"},children:"Available for download after claiming"})})]})})]})})]},s.id)):e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card border-0 shadow-sm rounded-20 p-5 text-center",children:e.jsx(f,{message:"You haven't earned any certificates yet.",icon:"fa-award",link:"/events",linkText:"Browse Events"})})})})]})}export{I as default};
