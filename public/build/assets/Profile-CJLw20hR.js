import{f as e,d as s,u as a,j as l,H as r,s as i}from"./vendor-KZSLvCor.js";import o from"./Layout-BGCaz3um.js";import{T as d}from"./Toast-hpu2Jnrp.js";import"./MainLayout-ByP9tZ80.js";import"./SimpleBreadcrumb-9WZ9B38O.js";function n({auth:n,status:t}){const{flash:c}=e().props,[m,h]=s.useState(null),{data:u,setData:p,post:f,processing:v,errors:x,reset:b}=a({name:n.user.name,email:n.user.email,phone:n.user.phone||"",password:"",password_confirmation:"",avatar:null,_method:"POST"});s.useEffect(()=>{if((null==c?void 0:c.success)||"profile-updated"===t){h({message:"Profile updated successfully!",type:"success"});const e=setTimeout(()=>h(null),3e3);return()=>clearTimeout(e)}if(null==c?void 0:c.error){h({message:c.error,type:"danger"});const e=setTimeout(()=>h(null),3e3);return()=>clearTimeout(e)}},[c,t]);const[j,N]=s.useState(n.user.avatar||"https://ui-avatars.com/api/?name="+n.user.name+"&background=0D5EF4&color=fff"),w=s.useRef(null);return l.jsxs(o,{pageTitle:"Edit Profile",children:[l.jsx(r,{title:"Edit Profile"}),l.jsx(d,{show:!!m,message:null==m?void 0:m.message,type:null==m?void 0:m.type,onClose:()=>h(null)}),l.jsx("div",{className:"row justify-content-center",children:l.jsx("div",{className:"col-lg-12",children:l.jsxs("form",{onSubmit:e=>{e.preventDefault(),f(i("events.profile.update"),{onSuccess:()=>{b("password","password_confirmation")}})},children:[l.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[l.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:l.jsx("h5",{className:"fw-bold mb-0",children:"Profile Information"})}),l.jsxs("div",{className:"card-body p-4",children:[l.jsxs("div",{className:"d-flex align-items-center mb-5",children:[l.jsxs("div",{className:"position-relative me-4",children:[l.jsx("div",{className:"avatar rounded-circle overflow-hidden border-4 border-white shadow-sm",style:{width:"100px",height:"100px"},children:l.jsx("img",{src:j,alt:"Profile",className:"w-100 h-100 object-fit-cover"})}),l.jsx("button",{type:"button",className:"th-btn btn-sm btn-theme rounded-circle position-absolute bottom-0 end-0 shadow-sm",style:{width:"32px",height:"32px",padding:0},onClick:()=>w.current.click(),children:l.jsx("i",{className:"fa-solid fa-camera"})}),l.jsx("input",{type:"file",ref:w,className:"d-none",accept:"image/*",onChange:e=>{const s=e.target.files[0];s&&(p("avatar",s),N(URL.createObjectURL(s)))}})]}),l.jsxs("div",{children:[l.jsx("h6",{className:"fw-bold mb-1",children:"Profile Photo"}),l.jsx("p",{className:"text-muted small mb-0",children:"Update your profile picture. Max size 1MB."}),x.avatar&&l.jsx("div",{className:"text-danger small mt-1",children:x.avatar})]})]}),l.jsxs("div",{className:"row g-4",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-medium",children:"Full Name"}),l.jsx("input",{type:"text",className:"form-control ".concat(x.name?"is-invalid":""),value:u.name,onChange:e=>p("name",e.target.value),placeholder:"Enter your name"}),x.name&&l.jsx("div",{className:"invalid-feedback",children:x.name})]}),l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-medium",children:"Email Address"}),l.jsx("input",{type:"email",className:"form-control ".concat(x.email?"is-invalid":""),value:u.email,onChange:e=>p("email",e.target.value),placeholder:"Enter your email"}),x.email&&l.jsx("div",{className:"invalid-feedback",children:x.email})]}),l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-medium",children:"Phone Number"}),l.jsx("input",{type:"text",className:"form-control ".concat(x.phone?"is-invalid":""),value:u.phone,onChange:e=>p("phone",e.target.value),placeholder:"Enter your phone number"}),x.phone&&l.jsx("div",{className:"invalid-feedback",children:x.phone})]})]})]})]}),l.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[l.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:l.jsx("h5",{className:"fw-bold mb-0",children:"Change Password"})}),l.jsx("div",{className:"card-body p-4",children:l.jsxs("div",{className:"row g-4",children:[l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-medium",children:"New Password"}),l.jsx("input",{type:"password",className:"form-control ".concat(x.password?"is-invalid":""),value:u.password,onChange:e=>p("password",e.target.value),placeholder:"New Password"}),x.password&&l.jsx("div",{className:"invalid-feedback",children:x.password})]}),l.jsxs("div",{className:"col-md-6",children:[l.jsx("label",{className:"form-label fw-medium",children:"Confirm Password"}),l.jsx("input",{type:"password",className:"form-control",value:u.password_confirmation,onChange:e=>p("password_confirmation",e.target.value),placeholder:"Confirm new password"})]})]})})]}),l.jsx("div",{className:"text-end mb-5",children:l.jsx("button",{type:"submit",className:"th-btn th-radius",disabled:v,children:v?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save Changes"})})]})})})]})}export{n as default};
