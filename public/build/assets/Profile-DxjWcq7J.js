import{c as w,r as t,u as N,j as e,H as g}from"./app-14E-hAli.js";import y from"./Layout-DgzihKPS.js";import{s as P}from"./index-ikzcNs2d.js";import{T as C}from"./Toast-Cy4lFF9q.js";/* empty css            */import"./MainLayout-CLk3tuMP.js";import"./effect-fade-Cql-zif5.js";import"./SimpleBreadcrumb-oX6ufAtA.js";function $({auth:l,status:m}){const{flash:d}=w().props,[n,i]=t.useState(null),{data:o,setData:r,post:u,processing:h,errors:a,reset:f}=N({name:l.user.name,email:l.user.email,phone:l.user.phone||"",password:"",password_confirmation:"",avatar:null,_method:"POST"});t.useEffect(()=>{if(d?.success||m==="profile-updated"){i({message:"Profile updated successfully!",type:"success"});const s=setTimeout(()=>i(null),3e3);return()=>clearTimeout(s)}if(d?.error){i({message:d.error,type:"danger"});const s=setTimeout(()=>i(null),3e3);return()=>clearTimeout(s)}},[d,m]);const[x,v]=t.useState(l.user.avatar||"https://ui-avatars.com/api/?name="+l.user.name+"&background=0D5EF4&color=fff"),p=t.useRef(null),b=s=>{const c=s.target.files[0];c&&(r("avatar",c),v(URL.createObjectURL(c)))},j=s=>{s.preventDefault(),u(P("events.profile.update"),{onSuccess:()=>{f("password","password_confirmation")}})};return e.jsxs(y,{pageTitle:"Edit Profile",children:[e.jsx(g,{title:"Edit Profile"}),e.jsx(C,{show:!!n,message:n?.message,type:n?.type,onClose:()=>i(null)}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-lg-12",children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[e.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:e.jsx("h5",{className:"fw-bold mb-0",children:"Profile Information"})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"d-flex align-items-center mb-5",children:[e.jsxs("div",{className:"position-relative me-4",children:[e.jsx("div",{className:"avatar rounded-circle overflow-hidden border-4 border-white shadow-sm",style:{width:"100px",height:"100px"},children:e.jsx("img",{src:x,alt:"Profile",className:"w-100 h-100 object-fit-cover"})}),e.jsx("button",{type:"button",className:"th-btn btn-sm btn-theme rounded-circle position-absolute bottom-0 end-0 shadow-sm",style:{width:"32px",height:"32px",padding:0},onClick:()=>p.current.click(),children:e.jsx("i",{className:"fa-solid fa-camera"})}),e.jsx("input",{type:"file",ref:p,className:"d-none",accept:"image/*",onChange:b})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"fw-bold mb-1",children:"Profile Photo"}),e.jsx("p",{className:"text-muted small mb-0",children:"Update your profile picture. Max size 1MB."}),a.avatar&&e.jsx("div",{className:"text-danger small mt-1",children:a.avatar})]})]}),e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-medium",children:"Full Name"}),e.jsx("input",{type:"text",className:`form-control ${a.name?"is-invalid":""}`,value:o.name,onChange:s=>r("name",s.target.value),placeholder:"Enter your name"}),a.name&&e.jsx("div",{className:"invalid-feedback",children:a.name})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-medium",children:"Email Address"}),e.jsx("input",{type:"email",className:`form-control ${a.email?"is-invalid":""}`,value:o.email,onChange:s=>r("email",s.target.value),placeholder:"Enter your email"}),a.email&&e.jsx("div",{className:"invalid-feedback",children:a.email})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-medium",children:"Phone Number"}),e.jsx("input",{type:"text",className:`form-control ${a.phone?"is-invalid":""}`,value:o.phone,onChange:s=>r("phone",s.target.value),placeholder:"Enter your phone number"}),a.phone&&e.jsx("div",{className:"invalid-feedback",children:a.phone})]})]})]})]}),e.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[e.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:e.jsx("h5",{className:"fw-bold mb-0",children:"Change Password"})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-medium",children:"New Password"}),e.jsx("input",{type:"password",className:`form-control ${a.password?"is-invalid":""}`,value:o.password,onChange:s=>r("password",s.target.value),placeholder:"New Password"}),a.password&&e.jsx("div",{className:"invalid-feedback",children:a.password})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label fw-medium",children:"Confirm Password"}),e.jsx("input",{type:"password",className:"form-control",value:o.password_confirmation,onChange:s=>r("password_confirmation",s.target.value),placeholder:"Confirm new password"})]})]})})]}),e.jsx("div",{className:"text-end mb-5",children:e.jsx("button",{type:"submit",className:"th-btn th-radius",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save Changes"})})]})})})]})}export{$ as default};
