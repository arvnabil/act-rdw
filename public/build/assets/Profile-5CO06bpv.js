import{h as e,r as s,u as a,j as r,H as l}from"./react-core-BZS_6Arc.js";import i from"./Layout-s8lDEvPV.js";import{m as o}from"./vendor-DViQF3d3.js";import{T as d}from"./Toast-DWtzSCpk.js";import"./MainLayout-C77euKeQ.js";import"./ui-jquery-B_dqbqb-.js";import"./ui-swiper-Db3Ms2SX.js";import"./animations-CPskncXY.js";import"./whatsapp-Df9uErmj.js";import"./SimpleBreadcrumb-BWYKCaK4.js";function n({auth:n,status:t}){const{flash:c}=e().props,[m,h]=s.useState(null),{data:p,setData:u,post:f,processing:j,errors:v,reset:x}=a({name:n.user.name,email:n.user.email,phone:n.user.phone||"",password:"",password_confirmation:"",avatar:null,_method:"POST"});s.useEffect(()=>{if((null==c?void 0:c.success)||"profile-updated"===t){h({message:"Profile updated successfully!",type:"success"});const e=setTimeout(()=>h(null),3e3);return()=>clearTimeout(e)}if(null==c?void 0:c.error){h({message:c.error,type:"danger"});const e=setTimeout(()=>h(null),3e3);return()=>clearTimeout(e)}},[c,t]);const[b,w]=s.useState(n.user.avatar||"https://ui-avatars.com/api/?name="+n.user.name+"&background=0D5EF4&color=fff"),N=s.useRef(null);return r.jsxs(i,{pageTitle:"Edit Profile",children:[r.jsx(l,{title:"Edit Profile"}),r.jsx(d,{show:!!m,message:null==m?void 0:m.message,type:null==m?void 0:m.type,onClose:()=>h(null)}),r.jsx("div",{className:"row justify-content-center",children:r.jsx("div",{className:"col-lg-12",children:r.jsxs("form",{onSubmit:e=>{e.preventDefault(),f(o("events.profile.update"),{onSuccess:()=>{x("password","password_confirmation")}})},children:[r.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[r.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:r.jsx("h5",{className:"fw-bold mb-0",children:"Profile Information"})}),r.jsxs("div",{className:"card-body p-4",children:[r.jsxs("div",{className:"d-flex align-items-center mb-5",children:[r.jsxs("div",{className:"position-relative me-4",children:[r.jsx("div",{className:"avatar rounded-circle overflow-hidden border-4 border-white shadow-sm",style:{width:"100px",height:"100px"},children:r.jsx("img",{src:b,alt:"Profile",className:"w-100 h-100 object-fit-cover"})}),r.jsx("button",{type:"button",className:"th-btn btn-sm btn-theme rounded-circle position-absolute bottom-0 end-0 shadow-sm",style:{width:"32px",height:"32px",padding:0},onClick:()=>N.current.click(),children:r.jsx("i",{className:"fa-solid fa-camera"})}),r.jsx("input",{type:"file",ref:N,className:"d-none",accept:"image/*",onChange:e=>{const s=e.target.files[0];s&&(u("avatar",s),w(URL.createObjectURL(s)))}})]}),r.jsxs("div",{children:[r.jsx("h6",{className:"fw-bold mb-1",children:"Profile Photo"}),r.jsx("p",{className:"text-muted small mb-0",children:"Update your profile picture. Max size 1MB."}),v.avatar&&r.jsx("div",{className:"text-danger small mt-1",children:v.avatar})]})]}),r.jsxs("div",{className:"row g-4",children:[r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label fw-medium",children:"Full Name"}),r.jsx("input",{type:"text",className:"form-control ".concat(v.name?"is-invalid":""),value:p.name,onChange:e=>u("name",e.target.value),placeholder:"Enter your name"}),v.name&&r.jsx("div",{className:"invalid-feedback",children:v.name})]}),r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label fw-medium",children:"Email Address"}),r.jsx("input",{type:"email",className:"form-control ".concat(v.email?"is-invalid":""),value:p.email,onChange:e=>u("email",e.target.value),placeholder:"Enter your email"}),v.email&&r.jsx("div",{className:"invalid-feedback",children:v.email})]}),r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label fw-medium",children:"Phone Number"}),r.jsx("input",{type:"text",className:"form-control ".concat(v.phone?"is-invalid":""),value:p.phone,onChange:e=>u("phone",e.target.value),placeholder:"Enter your phone number"}),v.phone&&r.jsx("div",{className:"invalid-feedback",children:v.phone})]})]})]})]}),r.jsxs("div",{className:"card border-0 shadow-sm rounded-20 mb-4 overflow-hidden",children:[r.jsx("div",{className:"card-header bg-white border-bottom-0 p-4 pb-0",children:r.jsx("h5",{className:"fw-bold mb-0",children:"Change Password"})}),r.jsx("div",{className:"card-body p-4",children:r.jsxs("div",{className:"row g-4",children:[r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label fw-medium",children:"New Password"}),r.jsx("input",{type:"password",className:"form-control ".concat(v.password?"is-invalid":""),value:p.password,onChange:e=>u("password",e.target.value),placeholder:"New Password"}),v.password&&r.jsx("div",{className:"invalid-feedback",children:v.password})]}),r.jsxs("div",{className:"col-md-6",children:[r.jsx("label",{className:"form-label fw-medium",children:"Confirm Password"}),r.jsx("input",{type:"password",className:"form-control",value:p.password_confirmation,onChange:e=>u("password_confirmation",e.target.value),placeholder:"Confirm new password"})]})]})})]}),r.jsx("div",{className:"text-end mb-5",children:r.jsx("button",{type:"submit",className:"th-btn th-radius",disabled:j,children:j?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Saving..."]}):"Save Changes"})})]})})})]})}export{n as default};
